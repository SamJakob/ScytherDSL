# Scyther-DSL
A grammar for [Scyther](https://github.com/cascremers/scyther), powered by Eclipse Xtext.

This is currently a work-in-progress intended to add support for Scyther to major
editors with Language Server Protocol (LSP) support.

Presently, it should start up in a copy of Eclipse (or an external editor if you generate
an LSP Server) and valid Scyther scripts should load successfully without errors. (I'm fairly
confident of this, having done a little testing, but there might be some issues still with
niche or deprecated/removed syntaxes).

## Project Structure

This project is an Eclipse workspace, with the set of projects as-generated by Xtext's
Setup Wizard. You can simply open the root directory as an Eclipse workspace. You may have
to install the Xtext SDK add-on (the full SDK) into Eclipse to be able to work with it,
and you can visit [https://www.eclipse.org/Xtext](https://www.eclipse.org/Xtext) to find out
more about Xtext, including instructions and usage guides.

- The main grammar can be found in [ScytherDSL/src/com/samjakob/Scyther.xtext](ScytherDSL/src/com/samjakob/Scyther.xtext)
which uses [Eclipse Xtext's Terminals](https://raw.githubusercontent.com/eclipse/xtext/main/org.eclipse.xtext/src/org/eclipse/xtext/common/Terminals.xtext) (as is the default).
- The `validation/` sub-package contains code to run diagnostics (i.e., perform validation
of entered code).
- Eclipse-specific highlighting (which is to be ported to the TextMate grammar) can be
found in [ScytherDSL.ui/src/com/samjakob/ui/highlighting/ScytherHighlightingConfiguration.java](ScytherDSL.ui/src/com/samjakob/ui/highlighting/ScytherHighlightingConfiguration.java)
(i.e., in the UI package). _This is used to specify the exact coloring and styling to be used
in the editor, which in an LSP-implementation is done client-side with a TextMate grammar._
- The platform-independent semantic highlighting (i.e., the portion of the language server that
detects the tokens that need to be colored, and tags them) can be found in the IDE package.
[ScytherDSL.ide/src/com/samjakob/ide/highlighting](ScytherDSL.ide/src/com/samjakob/ide/highlighting).

## Feature To-Do List

This is a fairly ambitious to-do list. It is unlikely that all of these features will be met,
and instead, versions will be released as and when a version is considered suitable for general
use.

- [x] Port grammar to Xtext.
- [x] Test warnings (validation) and quick fixes.
- âŒ› Semantic and Syntax Highlighting (In progress)
- [ ] Document Outline
- [ ] Information on hover
- [ ] Scoping (and? suggestion information on type)
- [ ] Document Link
- [ ] Rename Command
- [ ] Snippet Commands (Template Proposals)
- [ ] Formatting

## Release To-Do List

- [ ] Export LSP implementation.
- [ ] Write TextMate grammar to accompany LSP implementation
    - (Adds syntax highlighting into non-Eclipse editors).
- [ ] Write wrapper plugins for VS Code (and IntelliJ Platform)

## Credits

All credit for Scyther and its language goes to [Cas Cremers](https://github.com/cascremers)
and the other project authors.

Please note that this extension is developed under my own set of reverse-domain packages to
indicate that it is an 'unofficial' extension.
